{% extends "nagoyameshi/base.html" %}

{% block extra_head %}
{% endblock %}

{% block main %}

<h2 style="text-align:center">{{ restaurant.name}}</h2>
<div class="restaurant_image"><img src="{{ restaurant.image.url }}" alt="{{photo.name}}" ></div>
<table class="table">
    <tr>
        <th>カテゴリ</th>
            <td>
                {% for category_name in restaurant.category_name.all %}
                {{ category_name.category_name }}
                {% endfor %}
            </td>
    </tr>
    <tr>
        <th>郵便番号</th>
        <td>{{ restaurant.post_code }}</td>
    </tr>
    <tr>
        <th>住所</th>
        <td>{{ restaurant.address }}</td>
    </tr>
    <tr>
        <th>営業開始時間</th>
        <td>{{ restaurant.start_hour }}</td>
    </tr>
    <tr>
        <th>営業終了時間</th>
        <td>{{ restaurant.end_hour }}</td>
    </tr>
    <tr>
        <th>定休日</th>
            <td>
                {% for holiday in restaurant.holiday.all %}
                {{ holiday.holiday }}
                {% endfor %}
            </td>
    </tr>
    <tr>
        <th>電話番号</th>
        <td>{{ restaurant.tel }}</td>
    </tr>
    <tr>
        <th>メールアドレス</th>
        <td>{{ restaurant.email }}</td>
    </tr>
    <tr>
        <th>支払い方法</th>
            <td>
                {% for paymethod in restaurant.paymethod.all %}
                {{ paymethod.paymethod }}<br>
                {% endfor %}
            </td>
    </tr>
    <tr>
        <th>予約可能人数</th>
            <td>
                {{ restaurant.headcount }}人まで
            </td>
    </tr>
    <tr>
        <th>駐車場</th>
        <td>{{ restaurant.has_parking }}</td>
    </tr>
</table>

{% if request.user.is_authenticated %}

<!--有料会員の場合-->
{% if request.user.customer %}
<form action="{% url 'nagoyameshi:favorite' %}" method="post"  class="restaurant_detail_submit">    
    {% csrf_token %}
    <input type="hidden" name="restaurant" value="{{ restaurant.id }}">
    <input class="btn btn-outline-warning" type="submit" value="お気に入り登録" >
</form>

<form action="{% url 'nagoyameshi:reservation' %}" method="post" class="restaurant_detail_submit">
    {% csrf_token %}

    <input type="hidden" name="restaurant" value="{{ restaurant.id }}">

    <table class="contact_form">
        <tr class="contact">
            <th>
                <label class="contact_label">人数</label>
            </th>
            <td>
                <input type="number" name="headcount" min="1" class="contact_textbox">
            </td>
        </tr>
        <tr class="contact">
            <th>
                <label class="contact_label">予約日時</label>
            </th>
            <td>
                <input type="text" name="scheduled_date" class="flatpickr_datetime_form contact_textbox" >
            </td>
        </tr>
        <tr class="contact">
            <th>
                <label class="contact_label">備考</label>
            </th>
            <td>
                <textarea placeholder="アレルギー情報やその他店舗への依頼など" name="note" maxlength="100" class="contact_textbox"></textarea>
            </td>
        </tr>
    </table>
    <div class="input-group-apend" style="margin-top: 10px;">
        <input class="btn btn-outline-warning" type="submit" value="予約">
    </div>
</form>
{% endif %}

<!--無料会員の場合-->
{% if not request.user.customer %}
<div class="restaurant_detail_submit">
    <span>有料会員になるとお気に入り登録や予約が可能になります！</span><br>
    <a href="{% url 'nagoyameshi:premium_contents' %}" class="btn btn-outline-warning">有料会員について</a>
</div>
{% endif %}

<!--非会員の場合-->
{% else %}
<div class="restaurant_detail_submit">
    <span>有料会員になるとお気に入り登録や予約が可能になります！</span><br>
    <a href="{% url 'nagoyameshi:premium_contents' %}" class="btn btn-outline-warning">有料会員について</a>
    <a href="{% url 'login' %}" class="btn btn-outline-warning">既に会員登録済の方</a>
</div>
{% endif %}


<div class="back_top"><a href="{% url 'nagoyameshi:index' %}">トップページに戻る</a></div>
{% endblock %}